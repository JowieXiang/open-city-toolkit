

if db.describe -ct table= | grep INTEGER\DOUBLE PRECISION
INTEGER típusú vektoros adattábla lekérdezése,  intervallum, 6 osztály:

v.class map=slum_points@module_1 column=TOTAL algorithm=int nbclasses=6


1.
Leíró statisztika adatmezőkről (csak INTEGER, és DOUBLE PRECISION) esetén
Elvileg nincs vele gond, mennie kell(ene). 

Egyszerű poligon rajz a térképen
    |
    V
Save
    |
    V
Import to grass
    |
    V
Query  -->  v.vect.stats -p points=slum_houses@PERMANENT areas=area@module_1 type=centroid method=sum points_column=TOTAL
            sum, average, median, mode, minimum, min_cat, maximum, max_cat, range, stddev, variance, diversity

            
2.
Osztályközös statisztika
Ez macerás lehet. Alighanem az lenne a legjobb, ha csak numerikus értéket tartalmazhatna az adattábla. Vagy, legalábbis azt kikötzni, hogy csak numerikus értékre végzünk elemzést.
Ha nem numerikus, akkor lehet, hogy jobb lenne simán kíírni, greppelni és utána összeszámolni, vagy valami ilyesmi.
Hacsak így nem:


Először a houses térképet kell vágni az area-val, de attribútum tábla nem kell. Ezt az eredményt kell ponttá (centroid) konvertálni
Az overlay sokkal gyorsabb mint a clip, de ez se elég gyors.



v.overlay -t --overwrite ainput=slum_houses@PERMANENT binput=area@module_1 operator=and output=clipped

Ez gyors (csak ne legyen kimenő attribútum tábla, és érdemes a kimenetbe csak a pont és centroid objektumokat belefoglalni):
v.select -t --overwrite ainput=slum_houses@PERMANENT atype=point,centroid binput=area@module_1 btype=point,line,boundary,centroid,area output=clipped3@module_1

Aztán az eredmény összeszámolása:

v.vect.stats -p points=clipped3 areas=slum_houses@PERMANENT type=centroid,point area_where="CAT>0" | grep "|1" | wc -l





Ki kell választani, hogy mely térképeket akarja a felhasználó lekérdezni
(lehet több is)
    |
    V
A lekérdezendő térképekből pont-térképet kell csinálni
(v.extract, de attribútum tábla nélkül, mert úgy gyorsabb és úgyse fog kelleni.) 
terület -> centroid (akármi lekérdezhető lesz így)
pont -> pont (szerintem akármit le lehet így kérdezni)
vonal -> vonal (csak hosszak at lehet lekérni, meg vonaltípust)
v.extract -t input=slum_houses@PERMANENT type=centroid output=slum_points --overwrite
    |
    V    
Egyszerű poligon rajz a térképen
    |
    V
Save
    |
    V
Import to grass
    |
    V

    |
    V
new
    
Query  -->  



